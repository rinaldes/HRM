<div class="container-fluid">
  <ul class="breadcrumb">
        <li><p>YOU ARE HERE</p></li> 
        <li><a href="/employees" class="active">Employee</a></li>
    </ul>
    
    <div class="page-title">  
      <i class="fa fa-user"></i>
      <h3><span class="semi-bold">Employee</span></h3>  
    </div>
      <%= form_for(@employee, html: { role: "form", multipart: true}) do |f| %>
        <%= f.hidden_field :company_id, value: current_user.company_id %>
        <div id="form-target" class="grid simple">
          <div class="grid-body no-border has-tab">
                <%= render '/employees/tab_nav'%>
                <div class="tab-content">
                    <section class="tab-pane active" id="survey">
                      <div class="row">
                          <div class="col-sm-3">
                              <div class="profile-user">
                                    <a class="opt-profile change tip" data-toggle="tooltip" data-placement="top" data-original-title="Upload"><i class="fa fa-upload" onclick="$('#employee_image').click();"></i></a>
                                    <%= f.file_field :image, class: "opt-profile change tip hidden fa fa-upload", :data => {toggle: 'tooltip', placement: 'top', 'original-title' => 'Upload'}, placeholder: "Upload your image", :onchange =>"readURL(this);"%>
                                    <% if @employee.image.present? %>
                                      <figure>
                                          <img id="img_prev" src="<%= @employee.image %>" alt="profile" />
                                      </figure>
                                    <% else %>
                                      <figure>
                                          <img id="img_prev" src="/assets/profiles/user_def.png" alt="profile" />
                                      </figure>
                                    <% end %>

                                </div>
                            </div>
                            <div class="col-sm-9">
                              <div class="gen-form">
                                  <div class="form-group row">
                                          <div class="controls col-sm-8">            
                                             <%= f.hidden_field :flag_employee, :id => "value-input", :readonly => true %>
                                          </div>
                                      </div>
                                       <div class="form-group row">
                                   <label class="form-label col-sm-4">First Name </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.text_field :first_name, :class => "full-width" %>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Last Name </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.text_field :last_name, :class => "full-width" %>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Gender </label>
                                          <div class="controls col-sm-8">            
                                             <div class="radio">
                                                  <%= f.radio_button :gender, 'male', :checked => true %> 
                                                  <label for="employee_gender_male">Male</label>
                                                  <%= f.radio_button :gender, 'famale' %>
                                                  <label for="employee_gender_famale">Female</label>
                                                </div>

                                          </div>
                                      </div>
                                      
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Place/Date if Birth </label>
                                          <div class="controls col-sm-4">            
                                             <%= f.text_field :place, :class => "full-width" %>
                                          </div>
                                          <div class="controls col-sm-4">            
                                             <div class="input-append success date">
                                                    <%= f.text_field :birth, :class => "form-control full-width" %>
                                                    <span class="add-on"><span class="arrow"></span><i class="fa fa-th"></i></span> 
                                                </div>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Age </label>
                                          <div class="controls col-sm-8">            
                                             26
                                          </div>
                                      </div>
                                      
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Religion </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.select :religion, options_for_select(@religion), {:prompt => '--select--'},{:class => "form-control"} %>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Status </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.select :status, options_for_select(@status), {:prompt => '--select--'},{:class => "form-control"} %>
                                          </div>
                                      </div>
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Nationaly </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.text_field :nationality, :class => "full-width" %>
                                          </div>
                                      </div>
                                      
                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Email </label>
                                          <div class="controls col-sm-8">            
                                             <%= f.email_field :email, :class => "full-width" %>
                                          </div>
                                      </div>

                                      <div class="form-group row">
                                          <label class="form-label col-sm-4">Corporate Email </label>
                                          <div class="controls col-sm-8">
                                            <%= f.fields_for :corporate_email do |email| %>
                                              <%= email.email_field :email, :class => "full-width" %>
                                            <% end %>           
                                             
                                          </div>
                                      </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
        <div class="panel-group" id="accordion">
                      <div class="panel panel-default">
          <div class="panel-heading">
                          <h4 class="panel-title">
                            <a class="bold text-uppercase" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                               <i class="fa fa-stethoscope"></i> Health Info and Affair
                            </a>
                          </h4>
                        </div>
          <div id="collapseOne" class="panel-collapse collapse in">
            <div class="panel-body gen-form">
            
            <!-- Health Inro -->
            
            <section class="row column-seperation">
              <div class="col-sm-6">
                <div class="gen-form">
                <%= f.fields_for :health do |health| %>
                  <div class="form-group">
                    <h5 class="bold">Health Informmation</h5>
                 </div>
                 <div class="form-group row">
                    <label class="form-label col-sm-5">Color Blind</label>
                    <div class="controls col-sm-7">            
                      <div class="radio">
                      : <%= health.radio_button :color_blind, true, :checked => true %>  
                      <label for="employee_health_attributes_color_blind_true">Yes</label>
                      <%= health.radio_button :color_blind, false %>
                      <label for="employee_health_attributes_color_blind_false">No</label>
                      </div>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Blood Type</label>
                    <div class="controls col-sm-7">            
                      <div class="radio">
                      : <%= health.radio_button :blood_type, 'A', :checked => true %> 
                      <label for="employee_health_attributes_blood_type_a">A</label>
                      <%= health.radio_button :blood_type, 'B' %>
                      <label for="employee_health_attributes_blood_type_b">B</label>
                      <%= health.radio_button :blood_type, 'AB' %>
                      <label for="employee_health_attributes_blood_type_ab">AB</label>
                      <%= health.radio_button :blood_type, 'O' %>
                      <label for="employee_health_attributes_blood_type_o">O</label>
                      </div>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Height</label>
                    <div class="controls col-sm-7">            
                      : <%= health.number_field :height %> cm
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Weight</label>
                    <div class="controls col-sm-7">            
                      : <%= health.number_field :weight %> kg
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">History of Disease</label>
                    <div class="controls col-sm-7">            
                      : <%= health.text_area :history, :class => "full-width", :rows => '8'%>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Health Benefit</label>
                    <div class="controls col-sm-7">            
                      : <%= health.text_field :health_benefit %>
                    </div>
                   </div>
                <% end %>
                </div>
              </div>
              <!-- END -->
              
              <!-- Employee Affair-->
              <div class="col-sm-6">
                <div class="gen-form">
                <%= f.fields_for :affair do |affair| %>
                  <div class="form-group">
                    <h5 class="bold">Employee Affair</h5>
                 </div>
                 <div class="form-group row">
                    <label class="form-label col-sm-5">NIK</label>
                    <div class="controls col-sm-7">            
                      : <%= affair.text_field :nik, :class => 'full-width' %>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Date of Start Work</label>
                    <div class="controls col-sm-7">
                    <span class="pull-left">:</span>
                      <div class="input-append success date">
                       <%= affair.text_field :start_work, :class => 'form-control full-width' %>
                        <span class="add-on"><span class="arrow"></span><i class="fa fa-th"></i></span> 
                      </div>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Organization</label>
                    <div class="controls col-sm-7">            
                      : <%= affair.select :organization_id, options_for_select(@organizations), {:prompt => '--select--'} %>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Position</label>
                    <div class="controls col-sm-7">            
                      : <%= affair.select :position_id, options_for_select(@organizations), {:prompt => '--select--'} %>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">Tax Status</label>
                    <div class="controls col-sm-7">            
                      : <%= affair.select :tax_status, options_for_select(@organizations), {:prompt => '--select--'} %>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">No. NPWP</label>
                    <div class="controls col-sm-7">            
                     : <%= affair.text_field :no_npwp, :class => 'full-width' %>
                    </div>
                   </div>
                   <div class="form-group row">
                    <label class="form-label col-sm-5">No. ID</label>
                    <div class="controls col-sm-7">            
                     : <%= affair.text_field :no_id, :class => 'full-width' %>
                    </div>
                   </div>
                <% end %>
                </div>
              </div>
            </section>
            <!-- END -->
            
            </div>
          </div>
          </div>
        </div> 
                    
                
        <div class="panel-group" id="accordion2">
                      <div class="panel panel-default">
          <div class="panel-heading">
                          <h4 class="panel-title">
                            <a class="bold text-uppercase" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
                               <i class="fa fa-phone"></i> Contact
                            </a>
                          </h4>
                        </div>
            <div id="collapseTwo" class="panel-collapse collapse in">
              <div class="panel-body gen-form">
                <%= f.fields_for :contacts do |contact| %><!-- Contact Inro -->
                  <%= render 'contact_fields', f: contact %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
        <div class="panel-group" id="accordion3x">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <a class="bold text-uppercase" data-toggle="collapse" data-parent="#accordion3" href="#collapseThree">
                   <i class="fa fa-home"></i> Address Info
                </a>
              </h4>
            </div>
            <div id="collapseThree" class="panel-collapse collapse in">
              <div class="panel-body gen-form">
                <div class="row toolbar-block">
                  <div class="col-md-8 col-md-offset-4">
                    <div class="toolbar pull-right" id="toolbar_upload">
                      <div class="table-tools-actions">
                        <%= link_to_add_association f, :address_informations, :"data-association-insertion-node" => "tbody", :"data-association-insertion-method" => "append", :class => "btn btn-success" do %>
                          <span class="fa fa-plus"></span> Add New
                        <% end %>
                      <div class="separator">&nbsp;</div>
                    </div>
                  </div>
                </div>
              </div>
                <table class="table no-more-tables table-striped table-hover">
                    <thead>
                        <tr>
                            <th style="width:1%" >
                                <div class="checkbox check-default">
                                                <input id="checkbox10" type="checkbox" value="1" class="checkall">
                                                <label for="checkbox10"></label>
                                            </div>
                                        </th>
                                        <th style="width:10%">Province</th>
                                        <th style="width:15%">Kota/kabupaten</th>
                                        <th style="width:15%">KEC/KEL</th>
                                        <th style="width:8%">RT/RW</th>
                                        <th style="width:5%">Kode POS</th>
                                        <th style="width:8%">Street</th>
                                    </tr>
                                </thead>
                                <tbody>
                                 	<%= f.fields_for :address_informations do |address_information| %>
			                            <%= render 'address_information_fields', :f => address_information %>
			                        <% end %>   
                                    
                                </tbody>
                            </table>
            
            </div>
          </div>
          </div>
        </div>
        <div class="form-actions">
          <div class="pull-right">
            <%= f.submit :class => 'btn btn-success btn-cons' do %>
              Next <i class="fa fa-arrow-circle-o-right"></i>
            <% end %>
          </div>
        </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  <!-- //Disable form -->
  $(document).ready(function(){
    <% if @current_user.id == @employee.id %>
      var check=document.getElementById("value-input").value == "f";
      if (check){//check will be true or false
        $("#form-target :input").prop("disabled", false);
       }
      else{
        $("#form-target :input").prop("disabled", true);
        $("#form-target a").attr("disabled", "disabled");;
      }
    <% end %>
  });
  $('.input-append.date').datepicker({
    autoclose: true,
    todayHighlight: true
   });

  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();
      reader.onload = function (e) {
        $('#img_prev').attr('src', e.target.result).width(150).height(200);
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>
